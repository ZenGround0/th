<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treasure Hunt 2025 - Welcome</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>Welcome to the Treasure Hunt 2025!</h1>
        
        <div id="continueSection" class="continue-section" style="display: none;">
            <p>Welcome back! You have progress saved.</p>
            <button id="continueBtn" class="btn btn-primary">Continue Hunt</button>
            <button id="resetBtn" class="btn btn-secondary">Reset Progress</button>
        </div>
        
        <div class="instructions-section">
            <h2>How to Play</h2>
            <p>You'll encounter various riddles and puzzles throughout this treasure hunt. Each correct answer will lead you to the next clue.</p>
            
            <div class="important-note">
                <h3>Important: Multi-Word Answers</h3>
                <p>Some clues require answers with <strong>multiple words</strong>. When you see multiple input boxes, enter each word in its own box. All words must be correct to proceed!</p>
                <p>For example, if the answer is "shadow dog", you would enter:</p>
                <ul>
                    <li>First box: shadow</li>
                    <li>Second box: dog</li>
                </ul>
            </div>
            
            <div class="tips-section">
                <h3>Tips</h3>
                <ul>
                    <li>Answers are not case-sensitive</li>
                    <li>Don't include punctuation in your answers</li>
                    <li>Your progress is automatically saved</li>
                    <li>Some clues have hints available - look for the hint button!</li>
                </ul>
            </div>
        </div>
        
        <div class="start-section">
            <p>Ready to begin your adventure?</p>
            <button id="startHuntBtn" class="btn btn-primary btn-large">Start the Hunt!</button>
        </div>
    </div>
    
    <script>
        const STORAGE_KEY = "hunt2025_progress";
        const SALT = "--ShireMint2025";
        
        function generateHash(password) {
            const hash = CryptoJS.SHA256(password + SALT).toString(CryptoJS.enc.Hex);
            return hash.slice(0, 24);
        }
        
        function loadProgress() {
            try { 
                return JSON.parse(localStorage.getItem(STORAGE_KEY)) || []; 
            } catch { 
                return []; 
            }
        }
        
        function jumpTo(lastPassword) {
            const hash = generateHash(lastPassword);
            window.location.href = "clues/" + hash + ".html";
        }
        
        const progress = loadProgress();
        const continueSection = document.getElementById('continueSection');
        const continueBtn = document.getElementById('continueBtn');
        const resetBtn = document.getElementById('resetBtn');

        if (progress.length > 0) {
            continueSection.style.display = 'block';
            continueBtn.onclick = () => jumpTo(progress.at(-1));
            resetBtn.onclick = () => {
                if (confirm('Are you sure you want to reset all progress?')) {
                    localStorage.removeItem(STORAGE_KEY);
                    window.location.reload();
                }
            };
        }
        
        // Start hunt button
        document.getElementById('startHuntBtn').onclick = () => {
            const startHash = generateHash("start");
            window.location.href = "clues/" + startHash + ".html";
        };
    </script>
</body>
</html>